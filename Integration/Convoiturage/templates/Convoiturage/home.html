{# myapp/templates/myapp/home.html #}
{% extends 'base.html' %} {# Indique que ce template étend base.html #}
{% load static %}

{% block title %}Mon Espace Personnel{% endblock %}

{% block extra_css %}
    {# Ici, vous incluez le CSS spécifique à la page d'accueil #}
    <link rel="stylesheet" href="{% static 'Convoiturage/css/home.css' %}">
{% endblock %}

{% block content %}
    <div class="home-container">
        <header class="home-header">
            <h2>{{ welcome_message }}</h2>
            <p>Votre tableau de bord personnel pour gérer vos activités de covoiturage.</p>
        </header>

        <section class="user-status-summary">
            <h3>Votre statut actuel :</h3>
            <div class="status-badges">
                {% if user.is_conducteur %}
                    <span class="badge badge-conducteur">
                        <i class="fas fa-car"></i> Conducteur
                    </span>
                    <p>Votre véhicule : {{ user.type_vehicule|default:"Non spécifié" }} (Matricule: {{ user.matricule|default:"N/A" }})</p>
                    {# Vous pouvez ajouter plus d'informations ici si besoin #}
                {% endif %}
                {% if not user.is_conducteur %} {# Si l'utilisateur n'est pas conducteur, il est passager par défaut dans notre logique actuelle #}
                    <span class="badge badge-passager">
                        <i class="fas fa-user-friends"></i> Passager
                    </span>
                    <p>Vous êtes enregistré comme passager.</p>
                {% endif %}
                {% if not user.is_conducteur and not user.is_passager %} {# Si vous avez un champ is_passager dédié #}
                    <span class="badge badge-none">
                        <i class="fas fa-question-circle"></i> Aucun statut défini
                    </span>
                    <p>Définissez votre rôle pour commencer à utiliser l'application !</p>
                {% endif %}
            </div>
            <p class="status-action">
                <a href="{% url 'profile' %}" class="btn btn-primary-home">Gérer mon profil et mon statut</a>
            </p>
        </section>

        <section class="quick-actions">
            <h3>Actions Rapides :</h3>
            <div class="action-grid">
                {% if user.is_conducteur %}
                    <a href="{% url 'propose_trip' %}" class="action-card">
                        <i class="fas fa-plus-circle"></i>
                        <span>Proposer un trajet</span>
                        <p>Créez une annonce pour un covoiturage.</p>
                    </a>
                {% endif %}
                {# Supposons une URL 'search_trip' pour la recherche de trajets #}
                <a href="{% url 'search_trip' %}" class="action-card">
                    <i class="fas fa-search"></i>
                    <span>Rechercher un trajet</span>
                    <p>Trouvez un covoiturage disponible.</p>
                </a>
                <a href="{% url 'messages' %}" class="action-card">
                    <i class="fas fa-comments"></i>
                    <span>Mes Messages</span>
                    <p>Consultez vos conversations.</p>
                </a>
                <a href="{% url 'settings' %}" class="action-card">
                    <i class="fas fa-cog"></i>
                    <span>Paramètres</span>
                    <p>Ajustez les réglages de votre compte.</p>
                </a>
            </div>
        </section>

        {# Section pour les trajets récents ou à venir (si vous les implémentez) #}
        {% comment %}
        <section class="recent-activity">
            <h3>Vos Trajets Récents/À Venir :</h3>
            {% if recent_trips %}
                <ul class="trip-list">
                    {% for trip in recent_trips %}
                        <li>
                            De {{ trip.origin }} à {{ trip.destination }} le {{ trip.date|date:"d/m/Y H:i" }}
                            <a href="{% url 'trip_detail' trip.id %}">Voir les détails</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Aucun trajet récent ou à venir. Commencez-en un !</p>
            {% endif %}
        </section>
        {% endcomment %}
    </div>
{% endblock %}

{% block extra_css %}
    {% comment %} Vous pouvez réutiliser votre style_profil.css ou créer un home.css spécifique {% endcomment %}
    <link rel="stylesheet" href="{% static 'css/style_home.css' %}">
    {# Optionnel: Inclure Font Awesome pour les icônes #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %}

{% block extra_js %}
    {# Pas de JS complexe nécessaire pour cette page si elle est principalement statique #}
{% endblock %}